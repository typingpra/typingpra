<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Practice</title>
    <link rel="stylesheet" href="static/style.css">
    <script src="static/js/chart.min.js"></script>
</head>

<body tabindex="0">
    <header>
        <!-- Esc„Ç≠„Éº„Éí„É≥„ÉàÔºàÂ∑¶‰∏ä„Å´ÁßªÂãïÔºâ -->
        <div class="keyboard-hint">
            <span class="hint-key">Esc</span>
            <span class="hint-text">Reset</span>
        </div>
        <label for="language">Language:</label>
        <select id="language">
            <option value="python">Python</option>
            <option value="javascript">JavaScript</option>
            <option value="java">Java</option>
            <option value="c">C</option>
            <option value="cpp">C++</option>
            <option value="rust">Rust</option>
            <option value="lua">Lua</option>
            <option value="typewell">TypeWell Original</option>
            <option value="typewell-english-words">TypeWell English Words</option>
            <option value="initial-speed">Initial Speed</option>
            <option value="word-practice">Word Practice</option>
            <option value="custom">Custom</option>
        </select>
        <button id="toggle-custom">Custom</button>
        <button id="settings-btn">‚öôÔ∏è Settings</button>
        <button id="stats-btn">üìä Stats</button>
        <button id="help-btn">üìñ Help</button>
        <div id="stats">
            <div id="timer">0s</div>
            <div id="wpm">WPM: 0</div>
            <div id="acc">Accuracy: 100%</div>
            <div id="progress-text">0/0</div>
            <div>
                <label for="page-select">Page:</label>
                <select id="page-select"
                    style="background: var(--button-bg); color: var(--text-color); border: 1px solid var(--border-color); padding: 2px;">
                    <option value="0">1</option>
                </select>
            </div>
        </div>
    </header>

    <!-- „Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº„Çí„Éò„ÉÉ„ÉÄ„Éº„ÅÆÁõ¥‰∏ã„Å´ÁßªÂãï -->
    <div id="progress-bar">
        <div id="progress"></div>
    </div>

    <!-- „Éá„Éï„Ç©„É´„ÉàË®ÄË™û„ÅÆTypewell„É¢„Éº„ÉâÈÅ∏Êäû -->
    <div id="default-language-mode-container" style="display: none; padding: 10px 20px; background: var(--panel-bg); transition: background-color 0.3s; border: none; border-bottom: none;">
        <div class="default-mode-selection" style="margin-bottom: 10px;">
            <label class="default-mode-label">Mode:</label>
            <div class="default-modes">
                <label class="default-radio-label">
                    <input type="radio" name="default-mode" value="normal" id="default-normal" checked>
                    <span class="default-radio-text">Normal (Regular typing)</span>
                </label>
                <label class="default-radio-label">
                    <input type="radio" name="default-mode" value="typewell" id="default-typewell">
                    <span class="default-radio-text">TypeWell Mode (Strict typing)</span>
                </label>
            </div>
        </div>
    </div>

    <div id="custom-container">
        <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">
            <label for="custom-name">Name:</label>
            <input type="text" id="custom-name" placeholder="Enter code name..."
                style="background: var(--bg-color); color: var(--text-color); border: 1px solid var(--border-color); padding: 5px;">
            <button id="save-custom">Save</button>
            <input type="file" id="file-input"
                accept=".txt,.js,.py,.c,.cpp,.h,.html,.css,.java,.rb,.php,.go,.rs,.ts,.jsx,.tsx,.vue,.md,.json,.xml,.yml,.yaml,.sh,.bat"
                style="display: none;">
            <button id="choose-file-btn">üìÅ Choose File</button>
        </div>

        <!-- „Ç´„Çπ„Çø„É†„Ç≥„Éº„Éâ„É¢„Éº„ÉâÈÅ∏Êäû -->
        <div class="custom-mode-selection" style="margin-bottom: 10px;">
            <label class="custom-mode-label">Mode:</label>
            <div class="custom-modes">
                <label class="custom-radio-label">
                    <input type="radio" name="custom-mode" value="normal" id="custom-normal" checked>
                    <span class="custom-radio-text">Normal (Regular typing)</span>
                </label>
                <label class="custom-radio-label">
                    <input type="radio" name="custom-mode" value="typewell" id="custom-typewell">
                    <span class="custom-radio-text">TypeWell Mode (Strict typing)</span>
                </label>
            </div>
        </div>

        <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">
            <select id="saved-codes"
                style="background: var(--button-bg); color: var(--text-color); border: 1px solid var(--border-color); padding: 5px; flex: 1;">
                <option value="">-- Select saved code --</option>
            </select>
            <button id="load-custom">Load</button>
            <button id="delete-custom">Delete</button>
        </div>
        <div style="font-size: 12px; color: var(--pending-color); margin-bottom: 10px;">
            ‚ö†Ô∏è Note: Only ASCII text files are supported. Files with non-ASCII characters (Japanese, Chinese, etc.) may
            not display correctly.
        </div>
        <label for="custom-code">Paste your code here:</label>
        <textarea id="custom-code" placeholder="Enter code for practice..."></textarea>
    </div>

    <!-- TypeWell„É¢„Éº„ÉâÈÅ∏Êäû -->
    <div id="typewell-container">
        <div class="typewell-mode-selection">
            <label class="typewell-mode-label">Mode:</label>
            <div class="typewell-modes">
                <label class="typewell-radio-label">
                    <input type="radio" name="typewell-mode" value="lowercase" id="typewell-lowercase" checked>
                    <span class="typewell-radio-text">Lowercase (a-z)</span>
                </label>
                <label class="typewell-radio-label">
                    <input type="radio" name="typewell-mode" value="mixed" id="typewell-mixed">
                    <span class="typewell-radio-text">Mixed Case (a-z, A-Z)</span>
                </label>
                <label class="typewell-radio-label">
                    <input type="radio" name="typewell-mode" value="symbols" id="typewell-symbols">
                    <span class="typewell-radio-text">With Symbols (a-z, A-Z, symbols)</span>
                </label>
                <label class="typewell-radio-label">
                    <input type="radio" name="typewell-mode" value="numbers" id="typewell-numbers">
                    <span class="typewell-radio-text">Numbers Only (0-9)</span>
                </label>
            </div>
        </div>
    </div>

    <!-- Initial Speed„É¢„Éº„ÉâÈÅ∏Êäû -->
    <div id="initial-speed-container">
        <div class="initial-speed-mode-selection">
            <label class="initial-speed-mode-label">Character Set:</label>
            <div class="initial-speed-modes">
                <label class="initial-speed-radio-label">
                    <input type="radio" name="initial-speed-mode" value="lowercase" id="initial-speed-lowercase"
                        checked>
                    <span class="initial-speed-radio-text">Lowercase + Punctuation (a-z, , .)</span>
                </label>
                <label class="initial-speed-radio-label">
                    <input type="radio" name="initial-speed-mode" value="numbers" id="initial-speed-numbers">
                    <span class="initial-speed-radio-text">Numbers Only (0-9)</span>
                </label>
                <label class="initial-speed-radio-label">
                    <input type="radio" name="initial-speed-mode" value="lefthand" id="initial-speed-lefthand">
                    <span class="initial-speed-radio-text">Left Hand (qwertasdfgzxcvb)</span>
                </label>
                <label class="initial-speed-radio-label">
                    <input type="radio" name="initial-speed-mode" value="righthand" id="initial-speed-righthand">
                    <span class="initial-speed-radio-text">Right Hand (yuiophjklnm,.)</span>
                </label>
                <label class="initial-speed-radio-label">
                    <input type="radio" name="initial-speed-mode" value="hand_primitive" id="initial-speed-hand-primitive">
                    <span class="initial-speed-radio-text">Hand Primitive (Left/Right reflex training)</span>
                </label>
            </div>
            <div class="initial-speed-trials-section">
                <label class="initial-speed-trials-label">Trials:</label>
                <select id="initial-speed-trials" class="initial-speed-trials-select">
                    <option value="5">5</option>
                    <option value="10" selected>10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Word Practice„É¢„Éº„ÉâÈÅ∏Êäû -->
    <div id="word-practice-container">
        <div class="word-practice-mode-selection">
            <label class="word-practice-mode-label">Word Set:</label>
            <div class="word-practice-sets">
                <label class="word-practice-radio-label">
                    <input type="radio" name="word-practice-set" value="top500" id="word-practice-top500" checked>
                    <span class="word-practice-radio-text">Top 500 Words</span>
                </label>
                <label class="word-practice-radio-label">
                    <input type="radio" name="word-practice-set" value="top1500" id="word-practice-top1500">
                    <span class="word-practice-radio-text">Top 1500 Words</span>
                </label>
                <label class="word-practice-radio-label">
                    <input type="radio" name="word-practice-set" value="all" id="word-practice-all">
                    <span class="word-practice-radio-text">All Words (2809)</span>
                </label>
            </div>
            <div class="word-practice-count-section">
                <label class="word-practice-count-label">Words:</label>
                <select id="word-practice-count" class="word-practice-count-select">
                    <option value="5">5</option>
                    <option value="10" selected>10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                </select>
            </div>
        </div>
    </div>

    <!-- TypeWell English Words„É¢„Éº„ÉâÈÅ∏Êäû -->
    <div id="typewell-english-words-container">
        <div class="typewell-english-words-mode-selection">
            <label class="typewell-english-words-mode-label">Word Set:</label>
            <div class="typewell-english-words-sets">
                <label class="typewell-english-words-radio-label">
                    <input type="radio" name="typewell-english-words-set" value="top500" id="typewell-english-words-top500" checked>
                    <span class="typewell-english-words-radio-text">Top 500 Words</span>
                </label>
                <label class="typewell-english-words-radio-label">
                    <input type="radio" name="typewell-english-words-set" value="top1500" id="typewell-english-words-top1500">
                    <span class="typewell-english-words-radio-text">Top 1500 Words</span>
                </label>
                <label class="typewell-english-words-radio-label">
                    <input type="radio" name="typewell-english-words-set" value="all" id="typewell-english-words-all">
                    <span class="typewell-english-words-radio-text">All Words (2809)</span>
                </label>
            </div>
        </div>
    </div>

    <div id="container">
        <div id="code-pane">
            <!-- „Çø„Ç§„Éó„Ç¶„Çß„É´„Çπ„Çø„Éº„ÉàÁîªÈù¢ -->
            <div id="typewell-start-screen" style="display: none;">
                <div class="typewell-start-content">
                    <h2 class="typewell-start-title">TypeWell Original</h2>
                    <div class="typewell-start-info">
                        <p>360 characters ‚Ä¢ 10 lines ‚Ä¢ Random generated</p>
                        <p class="typewell-mode-display">Mode: <span id="typewell-current-mode">Lowercase</span></p>
                    </div>
                    <div class="typewell-start-instruction">
                        <div class="typewell-start-key">
                            <button id="typewell-start-button" class="start-key">Enter</button>
                        </div>
                        <p>Press Enter or Space to start</p>
                    </div>
                </div>
            </div>

            <!-- Initial Speed„Çπ„Çø„Éº„ÉàÁîªÈù¢ -->
            <div id="initial-speed-start-screen" style="display: none;">
                <div class="initial-speed-start-content">
                    <h2 class="initial-speed-start-title">Initial Speed</h2>
                    <div class="initial-speed-start-info">
                        <p>Reaction time measurement ‚Ä¢ <span id="initial-speed-trials-display">10</span> trials</p>
                        <p class="initial-speed-mode-display">Mode: <span id="initial-speed-current-mode">Lowercase +
                                Punctuation</span></p>
                    </div>
                    <div class="initial-speed-start-instruction">
                        <div class="initial-speed-start-key">
                            <button id="initial-speed-start-button" class="start-key">Start</button>
                        </div>
                        <p>Click Start to begin</p>
                    </div>
                </div>
            </div>

            <!-- Initial SpeedÁ∑¥ÁøíÁîªÈù¢ -->
            <div id="initial-speed-practice-screen" style="display: none;">
                <div class="initial-speed-practice-content">
                    <div id="initial-speed-status" class="initial-speed-status"></div>
                    <div id="initial-speed-character" class="initial-speed-character"></div>
                    <div id="initial-speed-progress" class="initial-speed-progress"></div>
                </div>
            </div>

            <!-- Word Practice„Çπ„Çø„Éº„ÉàÁîªÈù¢ -->
            <div id="word-practice-start-screen" style="display: none;">
                <div class="word-practice-start-content">
                    <h2 class="word-practice-start-title">Word Practice</h2>
                    <div class="word-practice-start-info">
                        <p>Type words accurately ‚Ä¢ <span id="word-practice-count-display">10</span> words</p>
                        <p class="word-practice-set-display">Set: <span id="word-practice-current-set">Top 500 Words</span></p>
                        <p class="word-practice-license">Word list: <a href="https://www.newgeneralservicelist.org/" target="_blank" rel="noopener" style="text-decoration: underline;">NGSL</a> by Browne, Culligan & Phillips ‚Ä¢ <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener" style="text-decoration: underline;">CC BY-SA 4.0</a></p>
                    </div>
                    <div class="word-practice-start-instruction">
                        <div class="word-practice-start-key">
                            <button id="word-practice-start-button" class="start-key">Start</button>
                        </div>
                        <p>Click Start to begin</p>
                    </div>
                </div>
            </div>

            <!-- Word PracticeÁ∑¥ÁøíÁîªÈù¢ -->
            <div id="word-practice-practice-screen" style="display: none;">
                <div class="word-practice-practice-content">
                    <div id="word-practice-status" class="word-practice-status"></div>
                    <div id="word-practice-word" class="word-practice-word"></div>
                    <div id="word-practice-progress" class="word-practice-progress"></div>
                </div>
            </div>

            <!-- TypeWell English Words„Çπ„Çø„Éº„ÉàÁîªÈù¢ -->
            <div id="typewell-english-words-start-screen" style="display: none;">
                <div class="typewell-english-words-start-content">
                    <h2 class="typewell-english-words-start-title">TypeWell English Words</h2>
                    <div class="typewell-english-words-start-info">
                        <p>400 characters ‚Ä¢ 8 lines ‚Ä¢ English vocabulary practice</p>
                        <p class="typewell-english-words-set-display">Set: <span id="typewell-english-words-current-set">Top 500 Words</span></p>
                        <p class="typewell-english-words-license">Word list: <a href="https://www.newgeneralservicelist.org/" target="_blank" rel="noopener" style="text-decoration: underline;">NGSL</a> by Browne, Culligan & Phillips ‚Ä¢ <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener" style="text-decoration: underline;">CC BY-SA 4.0</a></p>
                    </div>
                    <div class="typewell-english-words-start-instruction">
                        <div class="typewell-english-words-start-key">
                            <button id="typewell-english-words-start-button" class="start-key">Enter</button>
                        </div>
                        <p>Press Enter or Space to start</p>
                    </div>
                </div>
            </div>

            <!-- „Çø„Ç§„Éó„Ç¶„Çß„É´„Ç´„Ç¶„É≥„Éà„ÉÄ„Ç¶„É≥ -->
            <div id="typewell-countdown" style="display: none;">
                <div class="typewell-countdown-content">
                    <div class="typewell-countdown-number">3</div>
                    <div class="typewell-countdown-text">Get Ready...</div>
                </div>
            </div>

            <pre id="code"></pre>
        </div>
        <div id="overlay">
            <div id="results-card">
                <div class="results-header">
                    <h2 class="results-title">Results</h2>
                </div>

                <div class="page-info">
                    <span id="page-badge">Page 1/1</span> ‚Ä¢ <span id="character-count">0 characters</span>
                </div>

                <!-- Initial SpeedÂ∞ÇÁî®„É™„Ç∂„É´„Éà -->
                <div id="initial-speed-results" class="initial-speed-results-section" style="display: none;">
                    <div class="initial-speed-results-header">
                        <span id="initial-speed-mode-info">Lowercase + Punctuation</span> ‚Ä¢
                        <span id="initial-speed-trials-info">10 trials</span>
                    </div>
                    <div id="initial-speed-summary" class="initial-speed-summary">
                        <!-- „Çµ„Éû„É™„ÉºÁµ±Ë®à„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Çã -->
                    </div>
                    <div id="initial-speed-detailed-results" class="initial-speed-detailed-results">
                        <!-- Ë©≥Á¥∞ÁµêÊûú„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Çã -->
                    </div>
                </div>

                <!-- TypeWellÂ∞ÇÁî®„É™„Ç∂„É´„Éà -->
                <div id="typewell-results" class="typewell-results-section" style="display: none;">
                    <div class="typewell-results-header">
                        <span id="typewell-mode-info">Lowercase</span> ‚Ä¢
                        <span id="typewell-lines-info">10 lines</span>
                    </div>
                    
                    <!-- TypeWellÁî®Áµ±Ë®àË°®Á§∫ -->
                    <div class="stats-list typewell-stats">
                        <div class="stat-item">
                            <span class="stat-label">Time</span>
                            <span class="stat-value" id="typewell-time-display">0s</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">WPM</span>
                            <span class="stat-value" id="typewell-wpm-display">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Accuracy</span>
                            <span class="stat-value accuracy-value" id="typewell-accuracy-display">100%</span>
                        </div>
                    </div>
                    
                    <div id="typewell-detailed-results" class="typewell-detailed-results">
                        <!-- Ë©≥Á¥∞ÁµêÊûú„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Çã -->
                    </div>
                </div>

                <!-- Word PracticeÂ∞ÇÁî®„É™„Ç∂„É´„Éà -->
                <div id="word-practice-results" class="word-practice-results-section" style="display: none;">
                    <div class="word-practice-results-header">
                        <span id="word-practice-mode-info">Top 500 Words</span> ‚Ä¢
                        <span id="word-practice-count-info">10 words</span>
                    </div>
                    <div id="word-practice-summary" class="word-practice-summary">
                        <!-- „Çµ„Éû„É™„ÉºÁµ±Ë®à„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Çã -->
                    </div>
                    <div id="word-practice-detailed-results" class="word-practice-detailed-results">
                        <!-- Ë©≥Á¥∞ÁµêÊûú„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Çã -->
                    </div>
                </div>

                <div class="stats-list">
                    <div class="stat-item">
                        <span class="stat-label">Time</span>
                        <span class="stat-value" id="time-display">0s</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">WPM</span>
                        <span class="stat-value" id="wpm-display">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Accuracy</span>
                        <span class="stat-value accuracy-value" id="accuracy-display">100%</span>
                    </div>
                </div>

                <!-- TOP3„É©„É≥„Ç≠„É≥„Ç∞Ë°®Á§∫„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div id="top3-ranking" class="top3-ranking-section" style="display: none;">
                    <div id="ranking-info" class="ranking-info" style="display: none;">
                        <!-- „É©„É≥„ÇØ„Ç§„É≥Ë°®Á§∫„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Çã -->
                    </div>
                    <div class="ranking-header">
                        <span class="stat-label">Top Records</span>
                    </div>
                    <div id="ranking-list" class="ranking-list">
                        <!-- TOP3„É©„É≥„Ç≠„É≥„Ç∞„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Çã -->
                    </div>
                </div>

                <div id="mistake-chars" class="mistake-chars-section" style="display: none;">
                    <div class="mistake-chars-header">
                        <span class="stat-label">Frequent Mistakes:</span>
                    </div>
                    <div id="mistake-list" class="mistake-list">
                        <!-- „Éü„ÇπÊñáÂ≠ó„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Çã -->
                    </div>
                </div>

                <div class="results-buttons">
                    <button id="next-btn" class="result-btn primary">Next</button>
                    <button id="retry-btn" class="result-btn">Retry</button>
                    <button id="restart-btn" class="result-btn">Restart All</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ë®≠ÂÆö„Éë„Éç„É´ -->
    <div id="settings-panel">
        <div id="settings-content">
            <h3>Settings</h3>
            <div class="setting-row">
                <label>Theme:</label>
                <div class="theme-labels">
                    <span class="theme-label active" id="dark-label">üåô Dark</span>
                    <div class="toggle-switch" id="theme-toggle">
                        <div class="toggle-slider"></div>
                    </div>
                    <span class="theme-label" id="light-label">‚òÄÔ∏è Light</span>
                </div>
            </div>
            <div class="setting-row">
                <label>Text Wrap:</label>
                <div class="theme-labels">
                    <span class="theme-label active" id="wrap-disabled-label">üìú Off</span>
                    <div class="toggle-switch" id="text-wrap-toggle">
                        <div class="toggle-slider"></div>
                    </div>
                    <span class="theme-label" id="wrap-enabled-label">üìÉ On</span>
                </div>
            </div>
            <div class="setting-row">
                <label>Auto Break:</label>
                <div class="break-setting">
                    <span class="break-label">After</span>
                    <input type="number" id="break-chars-input" min="0" max="10000" placeholder="0" class="break-input">
                    <span class="break-label">chars (0 = off)</span>
                </div>
            </div>
            <!-- ‰øÆÊ≠£: „Çø„Ç§„Éó„Ç¶„Çß„É´„Ç´„Ç¶„É≥„Éà„ÉÄ„Ç¶„É≥Ë®≠ÂÆö -->
            <div class="setting-row">
                <label for="typewell-countdown-input">TypeWell Countdown:</label>
                <div class="break-setting">
                    <span class="break-label">Seconds (0-3):</span>
                    <input type="number" id="typewell-countdown-input" min="0" max="3" step="1" placeholder="3"
                        class="break-input" tabindex="0" inputmode="numeric" autocomplete="off">
                </div>
            </div>
            <div class="setting-row">
                <label>Data:</label>
                <div class="data-buttons">
                    <button id="export-data-btn">üì§ Export</button>
                    <button id="import-data-btn">üì• Import</button>
                    <input type="file" id="import-file-input" accept=".json" style="display: none;">
                </div>
            </div>
            <div class="setting-row">
                <label>Danger Zone:</label>
                <div class="data-buttons">
                    <button id="delete-all-data-btn">üóëÔ∏è Delete All Data</button>
                </div>
            </div>
            <button id="close-settings">Close</button>
        </div>
    </div>

    <!-- ‰ºëÊÜ©„ÉÄ„Ç§„Ç¢„É≠„Ç∞ -->
    <div id="break-dialog">
        <div id="break-content">
            <div class="break-header">
                <h3>Take a Break</h3>
            </div>
            <div class="break-body">
                <div class="break-message">
                    <p>Time for a short break.</p>
                    <p>Rest your hands and eyes before continuing.</p>
                </div>

                <div class="break-stats">
                    <div class="break-stat-item">
                        <span class="break-stat-label">WPM:</span>
                        <span class="break-stat-value" id="break-wpm">0</span>
                    </div>
                    <div class="break-stat-item">
                        <span class="break-stat-label">Time:</span>
                        <span class="break-stat-value" id="break-time">0s</span>
                    </div>
                    <div class="break-stat-item">
                        <span class="break-stat-label">Characters:</span>
                        <span class="break-stat-value" id="break-chars">0</span>
                    </div>
                </div>

                <button id="break-resume-btn" class="break-resume-button">
                    Continue (Press Enter)
                </button>
            </div>
        </div>
    </div>

    <!-- „Éò„É´„Éó„Éë„Éç„É´ -->
    <div id="help-panel">
        <div id="help-content">
            <div class="help-header">
                <h3>üìñ Help & Guide</h3>
                <button id="close-help" class="close-btn">‚úï</button>
            </div>
            <div class="help-sections">
                <div class="help-section">
                    <h4>üöÄ Getting Started</h4>
                    <p>Select a programming language from the dropdown and start typing to begin your practice session.
                        The timer starts automatically when you type your first character.</p>
                </div>

                <div class="help-section">
                    <h4>‚å®Ô∏è Basic Controls</h4>
                    <ul>
                        <li><strong>Type:</strong> Just start typing to match the displayed code</li>
                        <li><strong>Backspace:</strong> Fix mistakes by pressing Backspace</li>
                        <li><strong>Enter:</strong> Press Enter for new lines (shown as ‚èé)</li>
                        <li><strong>Spaces:</strong> Regular spaces, incorrect ones show as ‚ê£</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h4>üìä Understanding Statistics</h4>
                    <ul>
                        <li><strong>WPM (Words Per Minute):</strong> Speed calculated from correctly typed characters (1
                            word = 5 characters)</li>
                        <li><strong>Accuracy:</strong> Percentage of correct keystrokes out of total keystrokes</li>
                        <li><strong>Progress:</strong> Shows current position / total characters in the current page
                        </li>
                        <li><strong>Timer:</strong> Time elapsed since you started typing</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h4>üìù Custom Code</h4>
                    <ol>
                        <li>Click the <strong>"Custom"</strong> button to open the custom code editor</li>
                        <li>Select the typing mode: <strong>Normal</strong> (allows backspace) or <strong>TypeWell
                                Mode</strong> (strict, no backspace)</li>
                        <li>Paste or type your code in the text area</li>
                        <li>Enter a name and click <strong>"Save"</strong> to save it for later use</li>
                        <li>Use <strong>"Load"</strong> to select previously saved code</li>
                        <li>Use <strong>"Delete"</strong> to remove saved code you no longer need</li>
                    </ol>
                </div>

                <div class="help-section">
                    <h4>üìö Page Navigation</h4>
                    <p>Long code is automatically split into pages of 20 lines each. You can:</p>
                    <ul>
                        <li>Use the <strong>Page dropdown</strong> to jump to any page directly</li>
                        <li>Click <strong>"Next"</strong> after completing a page to continue</li>
                        <li>Click <strong>"Retry"</strong> to practice the current page again</li>
                        <li>Click <strong>"Restart All"</strong> to start over from page 1</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h4>üßò Auto Break Feature</h4>
                    <p>Configure automatic break reminders to prevent fatigue:</p>
                    <ul>
                        <li><strong>Setting:</strong> Configure character count threshold in Settings</li>
                        <li><strong>Trigger:</strong> Activates when line reaches the set character count</li>
                        <li><strong>Resume:</strong> Click "Continue" or press Enter to proceed</li>
                        <li><strong>Stats:</strong> View current WPM, time, and character count during break</li>
                        <li><strong>Disable:</strong> Set to 0 to turn off break reminders</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h4>‚å®Ô∏è Initial Speed Mode</h4>
                    <p>Practice single character reaction times for typing speed improvement:</p>
                    <ul>
                        <li><strong>Character Sets:</strong> Choose between lowercase + punctuation (a-z, comma, period)
                            or numbers only (0-9)</li>
                        <li><strong>Trials:</strong> Configure number of trials from 5 to 20</li>
                        <li><strong>Measurement:</strong> Precise reaction time measurement in milliseconds</li>
                        <li><strong>No Mistakes:</strong> Must type correct character to proceed (no backspace)</li>
                        <li><strong>Statistics:</strong> Detailed timing analysis with best/worst/average times</li>
                        <li><strong>Rankings:</strong> TOP3 records based on average reaction time</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h4>üìà Statistics Tracking</h4>
                    <p>Click the <strong>üìä Stats</strong> button to view your detailed practice history:</p>
                    <ul>
                        <li><strong>Language sections:</strong> Click to expand/collapse each language</li>
                        <li><strong>Part history:</strong> View all attempts for each page</li>
                        <li><strong>Best records:</strong> Highlighted with üèÜ icon</li>
                        <li><strong>Sorting:</strong> Click column headers to sort history tables</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h4>üé® Customization</h4>
                    <ul>
                        <li><strong>Theme:</strong> Switch between Dark mode (üåô) and Light mode (‚òÄÔ∏è)</li>
                        <li><strong>Text Wrap:</strong> Enable/disable line wrapping for long lines</li>
                        <li><strong>Auto Break:</strong> Set character threshold for break reminders</li>
                        <li><strong>Custom Mode:</strong> Choose between Normal typing (allows backspace) and TypeWell
                            Mode (strict, no backspace)</li>
                        <li><strong>Color coding:</strong>
                            <span style="color: var(--correct-color);">Green = Correct</span>,
                            <span
                                style="color: var(--incorrect-color); background: var(--incorrect-bg); padding: 2px;">Red
                                = Incorrect</span>,
                            <span style="color: var(--pending-color);">Gray = Pending</span>,
                            <span style="background: var(--current-bg); padding: 2px;">Blue = Current position</span>
                        </li>
                    </ul>
                </div>

                <div class="help-section">
                    <h4>üí° Tips for Better Practice</h4>
                    <ul>
                        <li><strong>Focus on accuracy first:</strong> Speed will come naturally with practice</li>
                        <li><strong>Use proper finger positioning:</strong> Follow touch typing guidelines</li>
                        <li><strong>Practice regularly:</strong> Short, frequent sessions are more effective</li>
                        <li><strong>Take breaks:</strong> Use auto-break feature to prevent fatigue</li>
                        <li><strong>Don't rush:</strong> Maintain steady rhythm and avoid hunting for keys</li>
                        <li><strong>Review your stats:</strong> Identify patterns and areas for improvement</li>
                        <li><strong>Try TypeWell Mode:</strong> Use strict mode for better accuracy training</li>
                        <li><strong>Practice Initial Speed:</strong> Improve reaction times with single character drills
                        </li>
                    </ul>
                </div>

                <div class="help-section">
                    <h4>üîß Troubleshooting</h4>
                    <ul>
                        <li><strong>App not responding:</strong> Refresh the page to reset</li>
                        <li><strong>Wrong character highlighted:</strong> Make sure you're typing exactly what's shown
                        </li>
                        <li><strong>Custom code not working:</strong> Check for proper syntax and formatting</li>
                        <li><strong>Break not appearing:</strong> Check Auto Break setting in Settings panel</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h4>‚å®Ô∏è Keyboard Shortcuts</h4>
                    <ul>
                        <li><strong>Esc:</strong> Reset and start over from the beginning</li>
                        <li><strong>Enter (during results):</strong> Continue to next page or finish</li>
                        <li><strong>r (during results):</strong> Retry current page</li>
                        <li><strong>R (during results):</strong> Restart all from beginning</li>
                        <li><strong>Enter (during break):</strong> Resume typing from break</li>
                        <li><strong>Backspace:</strong> Undo last character (not available in TypeWell mode)</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Áµ±Ë®à„Éë„Éç„É´ -->
    <div id="stats-panel">
        <div id="stats-content">
            <!-- „Éò„ÉÉ„ÉÄ„Éº -->
            <div class="stats-header">
                <h3 class="stats-title">üìä Statistics</h3>
            </div>

            <!-- „É°„Ç§„É≥„Ç®„É™„Ç¢ÔºöÂ∑¶Âè≥ÂàÜÂâ≤ -->
            <div class="stats-body">
                <!-- Â∑¶ÂÅ¥ÔºöÊó¢Â≠ò„ÅÆË©≥Á¥∞Áµ±Ë®à -->
                <div class="stats-left">
                    <!-- Ëã¶ÊâãÊñáÂ≠óÁµ±Ë®à -->
                    <div id="mistake-stats" class="mistake-stats-section">
                        <h4>üéØ Frequent Mistakes (Overall)</h4>
                        <div id="mistake-chart" class="mistake-chart">
                            <!-- Ëã¶ÊâãÊñáÂ≠ó„ÉÅ„É£„Éº„Éà„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Çã -->
                        </div>
                    </div>

                    <div id="stats-list">
                        <!-- Áµ±Ë®à„Éá„Éº„Çø„Åå„Åì„Åì„Å´ÂãïÁöÑ„Å´Ë°®Á§∫„Åï„Çå„Çã -->
                    </div>
                </div>

                <!-- Âè≥ÂÅ¥ÔºöÊñ∞„Åó„ÅÑ„Ç∞„É©„Éï„Ç®„É™„Ç¢ -->
                <div class="stats-right">
                    <!-- „Çµ„Éû„É™„ÉºÁµ±Ë®à -->
                    <div class="graph-summary">
                        <div class="summary-card">
                            <div class="summary-value" id="total-sessions">0</div>
                            <div class="summary-label">Total Sessions</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-value" id="avg-wpm">0</div>
                            <div class="summary-label">Average WPM</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-value" id="best-wpm">0</div>
                            <div class="summary-label">Best WPM</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-value" id="improvement">+0</div>
                            <div class="summary-label">WPM Improvement</div>
                        </div>
                    </div>

                    <!-- „Ç∞„É©„Éï„Ç≥„É≥„Éà„É≠„Éº„É´ -->
                    <div class="graph-controls">
                        <div class="control-group">
                            <label class="control-label">Language:</label>
                            <select class="control-select" id="graph-language-filter">
                                <!-- ÂãïÁöÑÁîüÊàê -->
                            </select>
                        </div>
                        <div class="control-group">
                            <label class="control-label">Period:</label>
                            <select class="control-select" id="graph-period-filter">
                                <option value="all">All Time</option>
                                <option value="7">Last 7 Days</option>
                                <option value="30">Last 30 Days</option>
                                <option value="90">Last 3 Months</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label class="control-label">Metric:</label>
                            <select class="control-select" id="graph-metric-filter">
                                <option value="latest">Latest</option>
                                <option value="best">Best</option>
                                <option value="average">Average</option>
                            </select>
                        </div>
                    </div>

                    <!-- „Ç∞„É©„Éï„Çø„Éñ -->
                    <div class="graph-tabs">
                        <button class="graph-tab active" data-tab="progress">üìà Progress</button>
                        <button class="graph-tab" data-tab="compare">üìä Compare</button>
                        <button class="graph-tab" data-tab="speed">‚ö° Speed</button>
                        <button class="graph-tab" data-tab="keys">‚å®Ô∏è Keys</button>
                    </div>

                    <!-- „Ç∞„É©„Éï„Ç≥„É≥„ÉÜ„Éä -->
                    <div class="graph-container">
                        <!-- „Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÊé®Áßª„Ç∞„É©„Éï -->
                        <div class="graph-content active" id="progress-graph">
                            <div class="canvas-container">
                                <canvas id="progress-chart"></canvas>
                            </div>
                        </div>

                        <!-- Ë®ÄË™ûÂà•ÊØîËºÉ„Ç∞„É©„Éï -->
                        <div class="graph-content" id="compare-graph">
                            <div class="canvas-container">
                                <canvas id="compare-chart"></canvas>
                            </div>
                        </div>

                        <!-- Initial SpeedÂàÜÊûê -->
                        <div class="graph-content" id="speed-graph">
                            <div class="canvas-container">
                                <canvas id="speed-chart"></canvas>
                            </div>
                        </div>

                        <!-- „Ç≠„Éº„Éú„Éº„ÉâÂàÜÊûê -->
                        <div class="graph-content" id="keys-graph">
                            <div class="keyboard-heatmap" id="keyboard-heatmap">
                                <!-- „Ç≠„Éº„Éú„Éº„Éâ„Åå„Åì„Åì„Å´ÁîüÊàê„Åï„Çå„Çã -->
                            </div>
                            <div class="canvas-container" style="height: 150px;">
                                <canvas id="keys-chart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Ë©≥Á¥∞„Éü„ÇπÂàÜÊûê -->
                    <div class="mistake-analysis">
                        <h4 class="mistake-title">üéØ Detailed Mistake Analysis</h4>
                        <div class="canvas-container" style="height: 200px;">
                            <canvas id="mistake-analysis-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- „Éï„ÉÉ„Çø„Éº -->
            <div class="stats-actions">
                <button id="clear-stats">Clear All</button>
                <button id="close-stats">Close</button>
            </div>
        </div>
    </div>

    <!-- ÂâäÈô§Á¢∫Ë™ç„ÉÄ„Ç§„Ç¢„É≠„Ç∞ -->
    <div id="delete-confirmation-dialog">
        <div id="delete-dialog-content">
            <div class="delete-dialog-header">
                <span id="delete-dialog-title">‚ö†Ô∏è DELETE ALL DATA</span>
            </div>
            <div class="delete-dialog-body">
                <span class="delete-warning-icon">üö®</span>
                <div class="delete-warning-text" id="delete-dialog-message">
                    Are you sure you want to delete ALL your data?
                </div>
                <div id="delete-warning-details" style="display: none;">
                    <div class="delete-warning-text">This will permanently delete:</div>
                    <ul class="delete-warning-list">
                        <li>All custom codes and saved files</li>
                        <li>All practice statistics and records</li>
                        <li>Theme preferences</li>
                        <li>Mistake character data</li>
                    </ul>
                    <div class="delete-warning-text" style="color: var(--incorrect-color); font-weight: bold;">
                        This action cannot be undone!
                    </div>
                </div>
                <div class="delete-dialog-buttons">
                    <button class="delete-dialog-btn delete-cancel-btn" id="delete-cancel-btn">Cancel</button>
                    <button class="delete-dialog-btn delete-confirm-btn" id="delete-proceed-btn">Yes, Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- „Éï„ÉÉ„Çø„Éº -->
    <div class="footer-simple">
        <a href="https://www.google.com" target="_blank" rel="noopener noreferrer">
            <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path
                    d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
            </svg>
            GitHub
        </a>
    </div>

    <!-- JavaScript„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„ÅøÔºàÈ†ÜÂ∫èÈáçË¶ÅÔºâ -->
    <script src="static/js/snippets.js"></script>
    <script src="static/js/words.js"></script>
    <script src="static/js/constants.js"></script>
    <script src="static/js/storage.js"></script>
    <script src="static/js/utils.js"></script>
    <script src="static/js/theme.js"></script>
    <script src="static/js/stats.js"></script>
    <script src="static/js/customCode.js"></script>
    <script src="static/js/typing.js"></script>
    <script src="static/js/ui.js"></script>
    <script src="static/js/main.js"></script>
</body>

</html>